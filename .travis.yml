language: python

sudo: false

notifications:
   email: false

#For Pypandoc can work, pandoc needs to be installed
addons:
  apt_packages:
    - pandoc

python:
  - 3.5

before_install:
  - pip install -U pip
#  - python -c \"from pypandoc import download_pandoc as dp; dp(targetfolder='~/bin/');\" # To install pandoc
#  - export PATH=~/bin:$PATH

# command to install dependencies
install:
  - pip install -r requirements.txt
  - python setup.py install
#  - python setup.py check --restructuredtext -s  # # Checking readme.rst formatting
#  - python setup.py checkdocs  # Checking readme.rst formatting
#  - travis_retry python setup.py develop

# command to run tests
script:
#  - python -m unittest tests.test_pyprime  # Basic way to see if the test are working
  - coverage run -m unittest tests.test_pyprime
#  - coverage run -m unittest discover -s tests/ # to run all tests of test folder
#  - coverage run --source=app setup.py test
#  - coverage run --source setup.py -m py.test # to be run with pytest
  - coverage report -m

#branches:
#  only:
#    - master

deploy:
  provider: pypi
  user: sylhare
  password:
    secure: TjqnI1YA8s+9ObCGhPo+ZxpHclrOqZlI0GGU8IGpnWdevoYJugVTgjQ8rohGTG74Ned82Lha/lT5zxBdk5cV4GwrnlyTIEy6V+XnLkxGtIxD8pNz+LimQOcdeE8ubkDkGGw4uIaX6mgbzZNLIbwAJc5B3avU6bDiLHENCGM2kLV9QiYN1zkLP1p3Cqs40PejqOPCaShSqcDF2mRrb65gLf41twv5LuPOiH34z2oJBwi3P1qqJPVdbWLHoB3qFc9sScqmxrvC9wCCABB7lcUFF46fLP8WttROXF9P02XfkE3pECi4DpsQXCEhBEVIaJMYZmBpNd3HKZBMVHY63zDihtmVE3IUvWimhWBJ4DyPw2DpMMDgMw2KkLc4PpNhKNxj2/ZSJMQtSoQG5mPzhBLPuosfulDhfSDyACTQdZnw2tz5ufxKyaAxXiJ6ZOcjeA9EiWLdJJ3uL2ytNYnekiotQZUXi7lgnjoSaJcqmRrp6HCTahKGDctffOatJICjgtD3CJyeXlZqD+X9mDnodZN38V9ALv26uzjoT7RExgrDUFfsAvOXAQH2P31mpsM3UXktBf7AQ4oMAbMf3gbDGHfP8c2eI1me//efoOd3hlUGRNMrgA6XXSuMuGENHuCoz6aZL2oNlZ9sEGhjdU0V4NCxJnfhTIFOxjxMS+LjkkcI0l0=

after_success:
  - pip install nprime
  - codecov
  - echo "Success!"
